version: 2.1
orbs:
  aws-cli: circleci/aws-cli@4.1.3
  node: circleci/node@5
executors:
  aws-executor:
    docker:
      - image: "cimg/node:22.5.1"
jobs:
  build:
    executor: aws-executor
    steps:
      - checkout
      - run:
          name: "Build CDK App"
          command: |
            npm install
            npm run build
      - run:
          name: "Test Cases"
          command: |
            npm test
workflow:
  cdk-deployment:
    jobs:
      - build